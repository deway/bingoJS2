!function(t){"use strict";var n="",e=Object.prototype.toString,i=Object.prototype.hasOwnProperty,r=function(){},o=Array.prototype.slice,u=null,c=function(){return u||(u=document.createElement("div"))},s=0,a=0,l={},f=window.bingo={version:{major:2,minor:0,rev:0,build:"beta1",toString:function(){return[this.major,this.minor,this.rev,this.build].join(".")}},_no_observe:!0,isDebug:!1,prdtVersion:"",supportWorkspace:!1,stringEmpty:n,noop:r,config:function(t){return 0==arguments.length?l:(this.extend(l,t),void this.bgTrigger("config",[l]))},hasOwnProp:function(t,n){return i.call(t,n)},trace:function(t){console.error&&console.error(t.stack||t.message||t+"")},isType:function(t,n){return e.apply(n)==="[object "+t+"]"},isUndefined:function(n){return"undefined"==typeof n||n===t},isNull:function(t){return null===t||this.isUndefined(t)},isBoolean:function(t){return this.isType("Boolean",t)},isNullEmpty:function(t){return this.isNull(t)||t===n},isFunction:function(t){return this.isType("Function",t)},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isString:function(t){return this.isType("String",t)},isObject:function(t){return!this.isNull(t)&&this.isType("Object",t)&&!this.isElement(t)&&!this.isWindow(t)},isPlainObject:function(n){if(!this.isObject(n))return!1;try{if(n.constructor&&!i.call(n,"constructor")&&!i.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var r;for(r in n);return r===t||i.call(n,r)},isArray:function(t){return Array.isArray?Array.isArray(t):this.isType("Array",t)},isWindow:function(t){return!(!t||t!=t.window)},isElement:function(t){var n=t&&(t.ownerDocument||t).documentElement;return!!n},trim:function(t){return this.isString(t)?t.replace(/(^\s*)|(\s*$)|(^\u3000*)|(\u3000*$)|(^\ue4c6*)|(\ue4c6*$)/g,""):this.isNull(t)?"":t.toString()},replaceAll:function(t,n,e,i){return this.isNullEmpty(t)||this.isNullEmpty(n)?t:(n=n.replace(/([^A-Za-z0-9])/g,"\\$1"),t=t.replace(new RegExp(n,i||"g"),e))},toStr:function(t){return this.isNull(t)?"":t.toString()},sliceArray:function(t,n,e){if(!t)return[];var i=o.call(arguments,1);return o.apply(t,i)},inArray:function(t,n){var e=-1;return this.isFunction(t)?n.some(function(n,i){return t.apply(n,arguments)===!0?(e=i,!0):void 0}):e=n.indexOf(t),e},removeArrayItem:function(t,n){var e=f.isFunction(t);return n.filter(function(n){return e?!t.apply(this,arguments):n!=t})},makeAutoId:function(){var t=(new Date).valueOf();return a=t==s?a+1:0,s=t,[t,a].join("_")},each:function(t,n,e){t&&n&&(f.isArray(t)||(t=this.sliceArray(t)),t.some(function(t){return n.apply(e||t,arguments)===!1}))},eachProp:function(t,n,e){if(t&&n){var i;this.each(Object.keys(t),function(t){return i=this[t],n.call(e||i,i,t,this)},t)}},htmlEncode:function(t){if(this.isNullEmpty(t))return"";var n=c();return n.textContent=t,n.innerHTML},htmlDecode:function(t){if(this.isNullEmpty(t))return"";var n=c();return n.innerHTML=t,n.textContent},extend:function(t){var n=arguments.length;if(1==n)return this.eachProp(t,function(t,n){this[n]=t},this),this;var e=this.sliceArray(arguments,1);return f.each(e,function(n){n&&this.eachProp(n,function(n,e){t[e]=n})},this),t},Class:function(t){var n=function(){var t=this._bgpro_;t&&(this._bgpro_=f.extend({},t)),this._bgpri_=new r,i&&i.apply(this,arguments)},e=n.prototype,i=null,r=function(){},o=r.prototype,u={Prop:function(t){e._bgpro_=f.extend(e._bgpro_||{},t),f.eachProp(t,function(t,n){e[n]=function(t){return 0==arguments.length?this._bgpro_[n]:(this._bgpro_[n]=t,this)}},this)},Event:function(t){e.bgEventDef(t)},Define:function(t){f.extend(e,t)},Private:function(t){f.extend(o,t)},Init:function(t){i=t}};return t.call(u),f.extend(e,{Extend:function(t){f.extend(this,t)},Private:function(t){f.extend(this._bgpri_,t)}}),n.constructor=n,n},proxy:function(t,n){return function(){return n&&n.apply(t,arguments)}},_splitEvName:function(t){return f.isString(t)?f.isNullEmpty(t)?null:f.trim(t).split(/\s+/g).map(function(t){return f.trim(t)}):t}},h=function(t,n){return{configurable:!1,enumerable:!1,value:t,writable:n!==!1}};Object.defineProperties(Object.prototype,{bgDefProp:h(function(t,n,e){return Object.defineProperty(this,t,h(n,e)),this}),bgDefProps:h(function(t){var n={};return f.eachProp(t,function(t,e){n[e]=h(t)},this),Object.defineProperties(this,n),this})});var p=["bingoV"+f.version.major].join(""),d=[p,f.version.minor].join("_");window[p]=window[d]=f}(),function(t,n){"use strict";var e="fulfilled",i="rejected",r="pending",o=function(t){return new o.fn._init(t)},u=function(t){return t&&!!t.then};o.fn=o.prototype={constructor:o,_init:function(t,n){this.state=r,this._thenH=[];try{t(function(t){this._doNext(t,e)}.bind(this),function(t){this._doNext(t,i)}.bind(this))}catch(o){this._doNext(o,i)}return this},then:function(t,n){return this._thenH&&(this._thenH.push([t,n]),this.state!=r&&this._doNext(this._result,this.state)),this},_end:function(){this._thenH=null},_doNext:function(o,u){return o&&t.isFunction(o.then)?o.state!=i||o._thenH?(this.state=r,this._result=n,void o.then(function(t){this._doNext(t,e)}.bind(this))["catch"](function(t){this._doNext(t,i)}.bind(this))):(this.state=u,this._result=null,void this._end()):(this.state=u,this._result=o,void(0!=this._thenH.length&&this._doThenNext(o,u)))},_doThenNext:function(n,r){var o=this._thenH.shift()[r==e?0:1];switch(r){case e:try{n=t.isFunction(o)?o(n):n}catch(u){n=u}n instanceof Error?(this._doNext(n,i),t.trace(n)):this._doNext(n,e);break;case i:t.isFunction(o)?(this._end(),o(n)):this._doNext(n,i)}},"catch":function(t){return this.then(null,t)},"finally":function(t){return this.then(t,t)}},o.fn._init.prototype=o.fn,t.extend(o,{resolve:function(t){return o(function(n){n(t)})},reject:function(t){return o(function(n,e){e(t)})},all:function(n,e,i){return o(function(r,o){var s=c(n,e),a=[],l=s.length;s.length>0?t.each(s,function(t,n){if(u(t)){var e=function(t){a[n]=t,--l||r(a)};t.then(e,i?e:o)}else a[n]=t,--l||r(a)}):r(a)})},race:function(n,e){return o(function(i,r){var o=c(n,e);o.length>0?t.each(o,function(t,n){u(t)?t.then(i,r):i(t)}):i()})},always:function(t,n){return this.all(t,n,!0)}});var c=function(n,e){if(n=t.sliceArray(n),0==n.length&&(n=[n]),!e)return n;var i=[];return t.each(n,function(t,n){i.push(e(t,n))}),i};o.when=o.all,o.isPromise=u,t.Promise=o,t.Deferred=function(){var t={promise:function(){return n}},n=o(function(n,e){t.resolve=function(t){n(t)},t.reject=function(t){e(t)}});return t}}(bingo),function(t,n){"use strict";var e="_bg_evs_",i=t.noop,r={trigger:i,end:i,off:i},o=function(t,n,i){var o=t[e]||(t[e]={});return i===!0?o[n]||(o[n]=u()):o[n]||r},u=function(){return{isEnd:!1,list:[],on:function(t,n,e){t&&(this.isEnd?t&&t.call(n):this.list.push({one:e===!0,callback:t}))},off:function(t){t?this.list=this.list.filter(function(n){return n.callback!=t}):this.list=[]},end:function(t){try{this.trigger(n,t),this.off()}finally{this.isEnd=!0}},trigger:function(n,e,i){var r,o=this.list,u=!1;return t.each(o,function(t){return t.one===!0&&(u=!0),(r=t.callback.apply(e,n||[]))===!1?!1:i===!0?!1:void 0}),u&&(this.list=o.filter(function(t){return!t.one})),r}}},c=t._splitEvName,s=function(t){var n=t[e];n&&(t.bgOff(Object.keys(n).join(" ")),t[e]=null)};Object.prototype.bgDefProps({bgOn:function(n,e){return t.each(c(n),function(t){o(this,t,!0).on(e,this)},this),this},bgOne:function(n,e){return t.each(c(n),function(t){o(this,t,!0).on(e,this,!0)},this),this},bgOff:function(n,e){return 0==arguments.length?s(this):t.each(c(n),function(t){o(this,t).off(e)},this),this},bgEnd:function(n){return t.each(c(n),function(t){o(this,t,!0).end(this)},this),this},bgTrigger:function(n,e,i){var r;return t.each(c(n),function(t){r=o(this,t).trigger(e,i||this)},this),r},bgTriggerHandler:function(n,e,i){var r;return t.each(c(n),function(t){r=o(this,t).trigger(e,i||this,!0)},this),r},bgEventDef:function(n){return t.each(c(n),function(t){this[t]=function(n){return this.bgOn(t,n)}},this),this},bgDispose:function(n){if(this.bgIsDispose)return void(n&&n.bgDispose());if(1==arguments.length)return void(n&&n.bgIsDispose||(this._bg_dispose||(this._bg_dispose=[])).push(n));this.bgIsDispose=!0;try{this.bgDispose=t.noop,this.bgDisposeStatus=1,this.bgTrigger("_bg_disp_"),t.each(this._bg_dispose,function(t){t.bgDispose()})}finally{this._bg_clsobd(),t.eachProp(this,function(t,n){t&&t.bgAutoDispose===!0&&t.bgDispose(),this[n]=null},this),this.bgDispose=t.noop,this.bgIsDispose=!0,this.bgDisposeStatus=2}},bgOnDispose:function(t){return this.bgOn("_bg_disp_",t)},bgIsDispose:!1,bgDisposeStatus:0,bgAutoDispose:!1,bgSync:function(t,n){var e=this._bgSync_||(this._bgSync_={_count:0,_end:function(){0!=this._count&&(this._count--,0==this._count&&(i._bgSync_=null,this.bgTrigger("done",[],i)))}}.bgEventDef("done")),i=this;return this.bgSyncAdd(1),n&&e.done(n),t&&t.call(this),e},bgSyncAdd:function(n){(this._bgSync_||this.bgSync())._count++,!!n&&setTimeout(t.proxy(this,function(){this.bgSyncDec()}),n)},bgSyncDec:function(){this._bgSync_&&this._bgSync_._end()}})}(bingo),function(t,n){"use strict";var e=(t._splitEvName,"_bg_obdata_"),i=function(n){return t.isArray(n)||t.isObject(n)},r=function(n,r,u){e in n||!function(){var i,r=[];n.bgDefProp(e,{deep:u,obs:{},sobs:[],sendObj:function(e){i&&clearTimeout(i),r.push(e);var o=this.sobs;o.length>0&&(i=setTimeout(function(){try{t.each(o,function(t){t.fn&&t.fn.call(this,r)},n)}finally{i=0,r=[]}},1))}},!1)}();var s=n[e];return u=u!==!1||s.deep,t.each(r,function(t,e){if(0!=t.indexOf("_")){var r=n[t];if(!o(n,t)){s.obs[t]=[];var a=function(){return b&&b.push({name:t,object:this,value:r,isChild:(b[b.length-1]||{}).value==this,type:"get"}),r},l=function(n){if(b&&b.push({name:t,object:this,value:r,isChild:(b[b.length-1]||{}).value==this,type:"set"}),r!=n){var e=r;r=n,u&&i(r)&&r.bgToObserve(null,u),c(this,t,{name:t,object:this,value:r,oldValue:e,type:"update"})}};Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:a,set:l}),u&&i(r)&&r.bgToObserve(null,u)}}}),n[e]},o=function(t,n){return!!u(t,n)},u=function(n,i){var r=n[e];return r&&(t.isNull(i)?r.sobs:r.obs[i])},c=function(n,i,r){var o=u(n,i);t.each(o,function(t){t.fn&&t.fn.call(this,[r])},n);var c=n[e];c&&c.sendObj(r)},s=function(n,e,i){o(n,e)||r(n,t.isNull(e)?null:[e]);var c=u(n,e);return c&&c.push({fn:i}),c},a=function(n,i,r){var o;(o=n[e])&&(t.isNull(i)?r?o.sobs=o.sobs.filter(function(t){return t.fn!=r}):o.sobs=[]:o.obs[i]&&(r?o.obs[i]=o.obs[i].filter(function(t){return t.fn!=r}):o.obs[i]=[]))},l=function(t){var n=t[e];n&&(n.obs=[]),t.bgToObserve()};Object.prototype.bgDefProps({_bg_clsobd:function(){var t=this[e];t&&(t.deep=!1,t.obs={},t.sobs=[])},bgToObserve:function(n,e){return this._no_observe===!0?this:(t.isBoolean(n)&&(e=n,n=null),r(this,n?[n]:Object.keys(this),e),this)},bgObServe:function(n,e){return this._no_observe===!0?this:(t.isNull(n)||t.isFunction(n)?(this.bgToObserve(),s(this,null,n||e)):t.each(n?[n]:Object.keys(this),function(t){s(this,t,e)},this),this)},bgUnObServe:function(n,e){return this._no_observe===!0?this:(t.isNull(n)||t.isFunction(n)?a(this,null,n||e):t.each(n?[n]:Object.keys(this),function(t){a(this,t,e)},this),this)},bgPublish:function(t){var n=t?this[t]:this;c(this,t,{name:t,object:this,value:n,oldValue:n,type:"publish"})},bgDataValue:function(t,n){var e=y(this,t,!1);return arguments.length>1&&(e[0][e[1]]=n),e[0][e[1]]},bgTestProps:function(t){return y(this,t,!0)[2]}});var f=["reverse","splice","push","pop","copyWithin","fill","shift","unshift","sort"],h={};t.each(f,function(t){var n=Array.prototype[t];h[t]=function(){if(o(this)){var e=this.slice(),i=n.apply(this,arguments),r=e.length==this.length&&this.every(function(t,n){return t===e[n]});return r||(l(this),c(this,t,{name:t,object:this,value:this,oldValue:e,type:"update"})),i}return n.apply(this,arguments)}}),h.size=function(t){if(0==arguments.length)return this.length;var n=this.length;this.length!=t&&(n=this.slice(),this.length=t,this.bgToObserve(),c(this,"",{name:"",object:this,value:this,oldValue:n,type:"update"}))},Array.prototype.bgDefProps(h);var p=function(n,e){if(n===e)return!0;if(!t.isArray(e)||n.length!=e.length)return!1;for(var i=0,r=n.length;r>i;i++)if(n[i]!=e[i])return!1;return!0},d=function(n,e){if(n===e)return!0;if(!t.isObject(e))return!1;var i=0,r=!0;return t.eachProp(n,function(t,n){return i++,e[n]!==t?(r=!1,!1):void 0}),r&&t.eachProp(e,function(){i--}),r&&0===i};t.extend({observe:function(n,e,i){if(t.isFunction(n)){var r=n;i=e;var o,u,c,s=[],a=function(n,e){var o;try{if(o=r(),n||(t.isArray(c)?!p(c,o):t.isObject(c)?!d(c,o):c!=o)){var a=1==s.length?s[0]:null,l=a&&1==a.length?a[0]:null;return(e?i.orgFn||i:i).call($,{name:l?l.name:"",value:o,oldValue:c,object:l?l.object:a||s,type:"bingo.observe"})}}finally{c=t.isArray(o)?t.sliceArray(o):t.isObject(o)?t.extend({},o):o,$.value=o,s=[],u=null}},l=function(t){t&&s.push(t),u||(u=setTimeout(a,1))},f=function(t){$.refresh(),l(t)},h=function(n){o=m(r),$.isSucc=v&&!g,$.isSucc&&(t.each(o.w,function(t){t.object.bgObServe(t.name,l)}),$.isObs=o.w.length>0,t.each(o.p,function(t){"toObsObj"in t&&t.value&&t.value.bgObServe(f),t.object.bgObServe(t.name,f)})),n!==!0?$.value=c=o.val:$.check()},b=function(){t.each(o.w,function(t){t.object.bgUnObServe(t.name,l)}),t.each(o.p,function(t){"toObsObj"in t&&t.value&&t.value.bgUnObServe(f),t.object.bgUnObServe(t.name,f)}),o=null},$={check:function(){l(null)},publish:function(t){return a(!0,t)},unObserve:function(){b(),this.bgDispose()},refresh:function(){b(),h(!0)}};return h(),$}if(n){var w=y(n,e,!1),n=w[0],x=w[1],_=function(){return n[x]};return t.observe(_,i)}},isObserve:function(t,n){return o(t,n)}}),t.observe.error=function(){g=!0};var v,g,b=null,m=function(t){try{b=[],v=!1,g=!1;var n=t(),e=$();return v=!0,e.val=n,e}finally{b=null}},$=function(){var n=[];t.each(b,function(t,e,i){var r=e+1,o=i.length==r;if(o)n.push(t);else{var u=i[r];u.isChild||n.push(t)}});var e=[];t.each(n,function(t){var n=e.some(function(n){return t.name==n.name&&t.object==n.object});n||e.push(t)});var i=[];return t.each(b,function(n){var r=n.value,o=!0;if((t.isNull(r)||t.isArray(r))&&(n.toObsObj=!0,o=!1),o=o&&e.some(function(t){return n.name==t.name&&n.object==t.object}),!o){var u=i.some(function(t){return n.name==t.name&&n.object==t.object});u||i.push(n)}}),{w:e,p:i}},y=function(n,e,i){if(!t.isString(e))return[n,e];var r="=bingo_dot=";e=e.replace(/\[(["']?)(.*?)\1\][.]?/g,function(t,n,e){return[".",e.replace(".",r),"."].join("")}).replace(/\.$/,"");var o=e.split("."),u=/[^0-9]/,c=o.length-2,s=n,a=e,l=!0;return c>=0&&t.each(o,function(t,n){return t=t.replace(r,"."),i&&!w(s,t)?(l=!1,!1):void(c>=n?s=s[t]?s[t]:s[t]=u.test(o[n+1])?{}:[]:(a=t,a in s||(s[a]=null)))}),[s,a,-1==c?w(s,a):l]},w=function(n,e){return t.isArray(n)||t.isObject(n)||t.isWindow(n)||t.isElement(n)||t.isFunction(n)?e in n:!1}}(bingo),function(t){"use strict";var n=function(t){return{name:t,_no_observe:!0,controller:r,_controller:{},service:o,_service:{},component:u,_component:{},command:c,_command:{}}},e=function(){return t.app(this.app)},i=function(n,i,r,o,u){var c=n[i];if(3==arguments.length)return c[r]||(n!=a?a[i][r]:null);if(t.isObject(o)&&u!==!1){var s=o;o=function(){return s}}t.isObject(o)||(o=p(o)),c[r]={name:r,fn:o,app:n.name,getApp:e,_no_observe:!0}},r=function(n,e){var r=[this,"_controller"].concat(t.sliceArray(arguments));return i.apply(this,r)},o=function(n,e){var r=[this,"_service"].concat(t.sliceArray(arguments));return i.apply(this,r)},u=function(n,e){var r=[this,"_component"].concat(t.sliceArray(arguments));return i.apply(this,r)},c=function(n,e){var r=[this,"_command"].concat(t.sliceArray(arguments)),o=r[3];if(o){var u={priority:50,tmpl:"",tmplUrl:"",replace:!1,include:!1,view:!1,compileChild:!0};o=o(),t.isFunction(o)||t.isArray(o)?u.link=p(o):u=t.extend(u,o),r[3]=u,r[4]=!1}return i.apply(this,r)},s={},a=n("defualtApp"),l=null;t.extend({app:function(t,e){var i=t?s[t]||(s[t]=n(t)):a;if(!e)return i;l=i;try{return e&&e.call(i,i),i}finally{l=null}},controller:function(n,e){if(t.isFunction(n)||t.isArray(n))return n;var i=l||a;return i.controller.apply(i,arguments)},component:function(n,e){if(t.isFunction(n)||t.isObject(n))return n;var i=l||a;return i.component.apply(i,arguments)},command:function(t,n){var e=l||a;return e.command.apply(e,arguments)},service:function(t,n){var e=l||a;return e.service.apply(e,arguments)}});var f=function(){};f.$injects=[];var h=/^\s*function[^(]*?\(([^)]+?)\)/i,p=function(n){if(n&&(n.$injects||n.$fn))return n.$fn||n;var e=f;if(t.isArray(n)){var i=t.sliceArray(n);e=n.$fn=i.pop(),e.$injects=i,e.$owner=n.$owner}else if(t.isFunction(n)){e=n;var r=e.toString(),i=[];r.replace(h,function(n,e){e&&t.each(e.split(","),function(n){n=t.trim(n),n&&i.push(n)})}),e.$injects=i}return e},d=function(n,e,i,r){if(!n)throw new Error("not find inject: "+e);var o=n.$injects,u=[];if(o&&o.length>0){var c=null;t.each(o,function(t){c=t in i?i[t]:i[t]=v(t,i,r),u.push(c)})}var s=n.apply(r||window,u);return t.isString(e)&&(i[e]=s),s},v=function(n,e,i){var r=null,o="";if(t.isFunction(n)||t.isArray(n))r=p(n);else{o=n;var u=e.$view.$getApp().service(o);r=u?u.fn:null}return d(r,o,e,i)};t.inject=function(n,e,i,r){return e||(e=t.rootView()),i=t.extend({$view:e,node:e.$getNode()[0],$viewnode:e.$getViewnode(),$attr:null,$withData:null},i),v(n,i,r||e)}}(bingo),function(t){"use strict";var n,e="DOMNodeRemoved",i=function(t){var n,e,i=[];for(e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_DOCUMENT|NodeFilter.SHOW_DOCUMENT_FRAGMENT,null,null);n=e.nextNode();)i.push(n);return i};document.documentElement.addEventListener(e,function(o){var u=o.target;setTimeout(function(){var c=u?u.parentNode:null;c||(u.bgTrigger(e,[o]),n||(n=setTimeout(function(){n=null,r.bgTrigger("onLinkNodeAll")},0)),u.hasChildNodes()&&t.each(i(u),function(){this.bgTrigger(e,[o])}))},0)},!1),t.linkNode=function(t,n){if(n){if(!t)return void n();t.bgOne(e,n)}},t.unLinkNode=function(t,n){t&&(n?t.bgOff(e,n):t.bgOff())},Object.prototype.bgDefProps({bgLinkNode:function(n){var e=t.proxy(this,function(){this.bgDispose()});return t.linkNode(n,e),(this._linkNodeFn||(this._linkNodeFn=[])).push(e),this.bgOnDispose(function(){this.bgUnLinkNode(n)}),this},bgUnLinkNode:function(n){var e=this._linkNodeFn;return e&&e.length>0&&e.forEach(function(n){t.unLinkNode(this,n)},n),this._linkNodeFn=[],this},bgLinkNodeAll:function(t){if(t){var n=this,e=function(){t.apply(n,arguments),n.bgIsDispose&&r.bgUnLinkNodeAll(e)};t._bglfall_=e,r.bgOn("onLinkNodeAll",e)}},bgUnLinkNodeAll:function(t){t&&r.bgOff("onLinkNodeAll",t._bglfall_)}});var r={}}(bingo),function(t){"use strict";var n,e=t.Promise,i=document,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=r.getElementsByTagName("base")[0],u=/loaded|complete|undefined/i,c=function(n,e,u){var c=i.createElement("script");c.type="text/javascript",c.charset=u||"utf-8",c.async=!0,c.defer=!1,c.src=n,s(c,e||t.noop),o?r.insertBefore(c,o):r.appendChild(c)},s=function(n,e){var i=function(){if(n&&u.test(n.readyState)){n.onload=n.onerror=n.onreadystatechange=null,!t.isDebug&&n.parentNode&&n.parentNode.removeChild(n);try{e&&e(n.src)}finally{n=void 0,e=null}}};n.onload=n.onerror=n.onreadystatechange=function(){i()}},a=[],l=[],f=[],h=function(t,n){f.push({fn:t,lv:n}),f.sort(function(t,n){return t.lv-n.lv}),!d()&&$()},p=function(t){return a.some(function(n){return n==t})},d=function(){return l.length>0},v=function(n){var e=t.inArray(function(t){return this.file==n},l);return e>=0?l[e]:null},g=function(t,e){if(p(t))e&&e(t);else{var i=v(t);i?i.fns.push(e):(l.push({file:t,fns:[e],status:0}),n||(n=setTimeout(b,0)))}},b=function(){n=null,t.each(l,function(t){if(!(t.status>0)){var n=t.file;t.status=1,c(n,function(){m(l,t)})}})},m=function(n,e){var i=n.indexOf(e);0>i||n.splice(i,1),a.push(e.file),t.each(e.fns,function(t){t&&t(e.file)}),$()},$=function(){var n=!d();if(n){l=[];var e=f;f=[],t.each(e,function(t){t.fn()})}else b()},y=!1;t.extend({using:function(n){if(y)return y=!1,t.config().using(n);try{return y=!0,t.route(n).usingPromise()}finally{y=!1}},usingAll:function(n){return t.isNumeric(n)||(n=t.using.Normal),t.Promise(function(t){h(t,n)})}}),t.extend(t.using,{First:0,NormalBefore:45,Normal:50,NormalAfter:55,Last:100});var w=t.noop,x="text/html",_="text/plain",A="application/json",N=function(t){return t&&(t==x?"html":t==A?"json":/^(?:text|application)\/javascript/i.test(t)?"script":/^(?:text|application)\/xml/i.test(t)&&"xml")||"text"},O=function(t,n){return(t+"&"+n).replace(/[&?]{1,2}/,"?")},j=function(n){if(n.data){var e=[];t.isObject(n.data)&&(t.eachProp(n.data,function(n,i){e.push(encodeURIComponent(i)+"="+encodeURIComponent(t.isObject(n)||t.isArray(n)?JSON.stringify(n):n))}),n.data=e.join("&").replace("%20","+")),n.type&&"GET"!=n.type.toUpperCase()||(n.url=O(n.url,n.data))}},D={type:"GET",beforeSend:w,success:w,error:w,complete:w,context:null,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:A,xml:"application/xml, text/xml",html:x,text:_},crossDomain:!1,timeout:0},T=function(n){var e=t.extend({},n);for(var i in D)void 0===e[i]&&(e[i]=D[i]);e.crossDomain||(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!=window.location.host);var r=e.dataType,o=/=\?/.test(e.url);if("jsonp"==r||o)return o||(e.url=O(e.url,"callback=?")),k(e);e.url||(e.url=window.location.toString()),j(e);var u,c=e.accepts[r],s={},a=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,l=D.xhr();e.crossDomain||(s["X-Requested-With"]="XMLHttpRequest"),c&&(c+=", */*; q=0.01",s.Accept=c,l.overrideMimeType&&l.overrideMimeType(c)),(e.contentType||e.data&&"GET"!=e.type.toUpperCase())&&(s["Content-Type"]=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"),e.headers=t.extend(s,e.headers);var f=e.context;l.onreadystatechange=function(){if(4==l.readyState){clearTimeout(u);var t,n=!1,i="";if(l.status>=200&&l.status<300||304==l.status||0==l.status&&"file:"==a){r=r||N(l.getResponseHeader("content-type")),t=l.responseText;try{"script"==r?(0,eval)(t):"xml"==r?t=l.responseXML:"json"==r&&(t=/^\s*$/.test(t)?null:JSON.parse(t))}catch(o){n=o}n?(i="parsererror",e.error.call(f,l,i,n)):(i="success",e.success.call(f,t,i,l))}else i="error",e.error.call(f,l,i,l);e.complete.call(f,l,i)}};var h="async"in e?e.async:!0;l.open(e.type,e.url,h);for(name in e.headers)l.setRequestHeader(name,e.headers[name]);return e.beforeSend.call(f,l,e)===!1?(l.abort(),!1):(e.timeout>0&&(u=setTimeout(function(){l.onreadystatechange=w,l.abort(),e.complete.call(f,l,"timeout")},e.timeout)),l.send(e.data?e.data:null),l)},k=function(n){var e,i="jsonp"+t.makeAutoId(),o=document.createElement("script"),u=function(){r.removeChild(o),i in window&&(window[i]=w),n.complete.call(n.context,c,"abort")},c={abort:u};return n.error&&(o.onerror=function(){c.abort(),n.error()}),window[i]=function(t){clearTimeout(e),r.removeChild(o),delete window[i],settings.success.call(n.context,t,"success",c)},j(n),o.src=n.url.replace(/=\?/,"="+i),r.appendChild(o),n.timeout>0&&(e=setTimeout(function(){c.abort()},n.timeout)),c},C=!1;t.ajax=function(n,e){if(C)return C=!1,t.config().ajax(n,e);try{return C=!0,t.route(n).ajaxPromise(e)}finally{C=!1}};var P=/^\s*<(\w+|!)[^>]*>/,E=!1;t.tmpl=function(n,i){var r="",o=n;if(t.isString(n))if(n.indexOf("#")<0){if(!n||P.test(n))return e.resolve(n);if(E)return E=!1,t.config().tmpl(n,i);try{return E=!0,t.route(n).tmplPromise(i)}finally{E=!1}}else o=document.getElementById(n.substr(1));if(o){var u=o.children.length,c=o.firstElementChild;r=1==u&&"script"==c.tagName.toLowerCase()?c.innerHTML:o.innerHTML}return e.resolve(r)};var S="_bg_cache2_";t.cache=function(n,e,i,r){var o=n[S];if(2==arguments.length){if(!o)return;var u=t.inArray(function(t){return t[0]==e},o);return u>-1?o[u][1]:void 0}4>arguments&&(r=20),o||(o=n[S]=[]);var u=t.inArray(function(t){return t[0]==e},o),c=u>-1?o[u]:null,s=(new Date).valueOf();return c?(c[1]=i,c[2]=s):(c=[e,i,s],o.push(c),o.length>=r+5&&(o.sort(function(t,n){return n[2]-t[2]}),n[S]=t.sliceArray(o,0,o.length-5))),i},t.cacheRemove=function(n,e){var i=n[S];if(i){var r=t.inArray(function(){return this[0]==e},i);return r>-1?i.splice(r,1)[0]:void 0}},t.route=function(n,e){return 1==arguments.length?t.routeContext(n).to:void(n&&e&&Z.add(n,e))},t.routeContext=function(t){return Z.getRouteByUrl(t)},t.routeLink=function(t,n){var e=Z.getRuote(t);return e?W(e.context.url,n,1):""},t.routeLinkQuery=function(n,e){n||(n="");var i="";if(n.indexOf("$")>=0||n.indexOf("?")>=0){var r=t.routeContext(n);e=t.extend({},e,r.params.queryParams);var o=n.indexOf("$")>=0?"$":"?";n=n.split(o)[0]}return t.eachProp(e,function(t,n){t=encodeURIComponent(t||""),i=[i,"$",n,":",t].join("")}),[n,i].join("")};var L=/(\W)/g,F=/\?[^?=]+\=.*$/,I=function(n){return!t.isNullEmpty(n)&&/[?*]+/.test(n.replace(F,""))},V=function(t){if(t=t.replace(F,""),!I(t))return null;L.lastIndex=0;var n=t.replace(L,"\\$1").replace(/\\\*\\\*/g,"(.*?)").replace(/(\\([?*]))/g,"([^./]$2?)");return n=["^",n,"$"].join(""),new RegExp(n)},R=/\{([^}]+)\}/gi,H=/\*\*|[?*](?!})/g,U=/\*$/,M=function(n,e){if(!n||!e.url)return null;var i=e.url,r=e._reg;if(!r){var o=i.indexOf("$")>=0?i.split("$")[0]:i;R.lastIndex=0,o=o.replace(R,function(t,n){return U.test(n)?"**":"*"}),r=e._reg=e._reg=V(o)}var u=n.split("$");if(!r.test(u[0]))return null;var c=[];i.replace(H,"{*}").replace(R,function(t,n,e){c.push({key:n,find:t})});var s,a={};u[0].replace(r,function(){var n=arguments;t.each(c,function(t,e){s=t.key,"*"!=s&&(a[s.replace("*","")]=n[e+1])})});var l=a.queryParams={};return u.length>1&&(u=t.sliceArray(u,1),t.each(u,function(t,n){var e=t.split(":"),i=e[0],r=decodeURIComponent(e[1]||"");i&&(a[i]=l[i]=r)})),a},B=function(){var n={app:null,controller:null,component:null},e=this.params;if(e){var i=e.app,r=t.app(i);n.app=r,e.controller&&(n.controller=r.controller(e.controller)),n.controller&&(n.controller=n.controller.fn),e.component&&(n.component=r.component(e.component)),n.component&&(n.component=n.component.fn)}return n},q=function(t,n,e,i){return{name:t,params:i,url:n,to:e,context:B}},z=",component,controller,service,app,queryParams,",W=function(n,e,i){if(R.lastIndex=0,!n||!e)return n;var r,o,u,c="";return t.eachProp(e,function(e,s){r=["{",s,"}"].join(""),o=["{",s,"*}"].join(""),n.indexOf(r)>=0?n=t.replaceAll(n,r,e):n.indexOf(o)>=0?n=t.replaceAll(n,o,e):z.indexOf(","+s+",")<0&&(u=encodeURIComponent(e||""),c=1==i?[c,"$",s,":",u].join(""):[c,"&",s,"=",u].join(""))}),c&&(n=1==i?[n,c].join(""):n.indexOf("?")>=0?[n,c].join(""):[n,c.substr(1)].join("?")),n},Z={datas:[],defaultRoute:{url:"**",to:function(t,n){return t}},add:function(n,e){var i=this.getRuote(n);t.isUndefined(e.priority)&&(e.priority=100),i?i.context=e:this.datas.push({name:n,context:e}),this.datas.sort(function(t,n){return t.context.priority-n.context.priority})},getRuote:function(n){var e=null;return t.each(this.datas,function(){return this.name==n?(e=this,!1):void 0}),e},getRouteByUrl:function(n){if(!n)return"";var e=n.split("?");e.length>1&&(n=e[0]);var i=null,r="",o=null;t.each(this.datas,function(){return i=this.context,o=M(n,i),o?(r=this.name,!1):void 0}),o||(i=Z.defaultRoute,r="defaultRoute"),(o||i.defaultValue)&&(o=t.extend({},i.defaultValue,o)),e.length>1&&(o||(o={}),e[1].replace(/([^=&]+)\=([^=&]*)/g,function(t,n,e){n in o||(o[n]=e)}));var u=i.to||"";t.isObject(u)?(u=t.extend({},i.to),t.eachProp(u,function(t,e){u[e]=Z.makeTo(t,i,n,o)})):(u=Z.makeTo(u,i,n,o),u={using:u,ajax:u,tmpl:u});var c=i.promise||{};return t.extend(u,{tmplPromise:c.tmpl||G,ajaxPromise:c.ajax||J,usingPromise:c.using||X}),q(r,n,u,o)},makeTo:function(n,e,i,r){return t.isFunction(n)&&(n=n.call(e,i,r)),W(n,r)}},G=function(n){return t.config().tmpl(this.tmpl,n)},J=function(n){return t.config().ajax(this.ajax,n)},X=function(n){return t.config().using(this.using)};t.config({using:function(n){return t.Promise(function(t){g(n,function(n){t(n)})})},ajax:function(n,i){return e(function(e,r){T(t.extend({type:"post",dataType:"json"},i,{url:n,success:function(t){try{i&&i.success&&i.success.apply(this,arguments),e(t)}catch(n){r(n)}},error:function(){try{i&&i.error&&i.error.apply(this,arguments),r(arguments[2])}catch(t){r(t)}}}))})},tmpl:function(n,i){var r=n,o=t.cache(Q,r);if(t.isString(o))return e.resolve(o);var u=function(n){return t.isString(n)&&t.cache(Q,r,n,200),n};return t.config().ajax(n,t.extend({dataType:"text",type:"get"},i)).then(u)}});var Q={}}(bingo),function(t){var n="bg-route",e="_bg_location_",i=document.documentElement;t.location=function(n){t.isString(n)&&(n='[bg-name="'+n+'"]');var r=null;t.isString(n)?r=document.querySelectorAll(n)[0]:n&&(r=n);var o=!!r;o||(r=i);var c=r[e];return c||(c=(new u).ownerNode(r).isRoute(o).name(r.getAttribute("bg-name")||""),c.bgLinkNode(r),c.bgOnDispose(function(){r[e]=null,this.bgTrigger("onClosed")}),r[e]=c),c},t.location.bgEventDef("onHref onHrefBefore onLoadBefore onLoaded");var r=/#([^#]*)$/,o=function(t){return r.test(t)?RegExp.$1:""};t.extend(t.location,{href:function(e,i){var r=i instanceof u?i:t.location(i);r.isRoute()&&(r.ownerNode().setAttribute(n,e),r.bgTrigger("onHref",[e]))},hash:function(t){return o(t)}});var u=t.location.Class=t.Class(function(){this.Prop({ownerNode:null,isRoute:!1,name:""}),this.Define({queryParams:function(){return this.routeParams().queryParams},routeParams:function(){var n=this.url(),e=t.routeContext(n);return e.params},href:function(n,e){t.location.href(n,t.isNullEmpty(e)?this:e)},reload:function(t){return this.href(this.url(),t)},onLoaded:function(t){return this.on("onLoaded",t)},url:function(){return this.isRoute()?this.ownerNode().getAttribute(n):window.location+""},hash:function(){return t.location.hash(this.url())},toString:function(){return this.url()},views:function(){return t.view(this.ownerNode())._bgpri_.children},close:function(){if(this.isRoute()&&this.bgTrigger("onCloseBefore")!==!1){var t=this.ownerNode();t.parentNode.removeChild(t)}}}),this.Event("onHref onCloseBefore onClosed")});t.service("$location",["node",function(n){return function(e){return t.location(e||n)}}]);var c="bg-route",s="bg-controller";t.command(c,function(){return{priority:1e3,replace:!1,view:!0,compileChild:!1,compilePre:["node",function(t){this.tmpl=t.getAttribute(c),t.setAttribute(s,this.tmpl)}],compile:["$compile","node","$attr","$location",function(n,e,i,r){var o=e.cloneNode(!1),u=null,a=function(c){return t.location.bgTrigger("onLoadBefore",[c,r])!==!1?(u&&!u.bgIsDispose&&u.stop(),u=n(o.outerHTML).replaceTo(e),u.compile().then(function(){u=null,i.bgIsDispose||(r.bgTrigger("onLoaded",[r,c]),t.location.bgTrigger("onLoaded",[r]))})):void 0};r().onHref(function(t){o.setAttribute(s,t),o.setAttribute(c,t),a(t)})}]}})}(bingo),function(t,n){"use strict";var e=window.requestAnimationFrame,i=window.cancelAnimationFrame,r=function(t,n,i){i.id=e(function(){0==n?t.call(i,i):r(t,n-1,i)})};if(!e){var o=["webkit","moz","ms","o"];t.each(o,function(t){return e=window[t+"RequestAnimationFrame"],e?(i=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"],!1):void 0}),e||(e=function(t){return window.setTimeout(t,10)},i=function(t){window.clearTimeout(t)})}t.isAFrame=!!e,t.aFrame=function(n,e){(!t.isNumeric(e)||0>e)&&(e=0);var o={stop:function(){i(this.id)},next:function(n){return t.aFrame(n,e)},frame:t.aFrame};return r(n,e,o),o},t.aFramePromise=function(n){return u(function(e){t.aFrame(e,n)})},t.aFrameProxy=function(n,e){var i=!1,r=function(){if(!i){i=!0;var r=arguments;t.aFrame(function(){i=!1,n.apply(this,r)}.bind(this),e)}};return r.orgFn=n,r};var u=t.Promise,c=u.isPromise,s=function(t,n){return c(n)&&t.push(n),n},a=function(n,e){return t.each(e,function(t){s(n,t)}),e},l=function(t,n){return t.length>0?u.always(t).then(n):n()},f=function(t){return 1==t||8==t},h=function(n){return t.inArray(function(t,n){return f(t.nodeType)?!!t.parentNode:!1},n)<0},p=function(n,e,i){t.each(e,function(r){if(f(r.nodeType)){var o=function(){e=t.removeArrayItem(function(t){return t==this||!t.parentNode}.bind(this),e),i&&h(e)&&i()};(r[n]||(r[n]=[])).push(o),t.linkNode(r,o)}});
},d=function(n,e){t.each(e,function(e){e[n]&&t.each(e[n],function(n){t.unLinkNode(e,n)})})},v={_cacheName:"__contextFun__",bindContext:function(n,e,i,r,o,u){var c=[e,i].join("_"),s=n[v._cacheName]||(n[v._cacheName]={});if(s[c])return s[c];i&&(e=["try { return ",e,";} catch (e) {bingo.observe.error(e);}"].join(""));var a=["with ($view) {",u?"with ($withData) {":"","return function (event) {",e,"}.bind(_this_);",u?"}":"","}"].join("");try{return s[c]=new Function("_this_","$view","$withData","bingo",a)(o||r,r,u,t)}catch(l){t.trace(e)}}},g=function(n){var e={$extend:function(n){return t.extend(this,n)}};return e.$extend(n)},b=function(e){var i={obsList:[],withData:{},valueObj:function(t){if(this.valueParams)return this.valueParams;var n=t.$contents,e=this.withData,i=t.$view,r=!!e&&e.bgTestProps(n),o=r?!1:i.bgTestProps(n),u=o?!1:window.bgTestProps(n),c=r?e:r?window:i;return this.valueParams=[c,r||o||u]}},r=g({$view:null,$node:null,$contents:"",$withData:function(t,n){i.withData[t]=n},$bindContext:function(t,n){return v.bindContext(this,t,n,this.$view,this.$node,i.withData)},$hasProps:function(){return i.valueObj(this)[0].bgTestProps(this.$contents)},$value:function(t){var n=this.$contents,e=i.valueObj(this)[0];return 0==arguments.length?e.bgDataValue(n):(this.$view.$updateAsync(),void e.bgDataValue(n,t))},$result:function(t){var n=this.$bindContext(this.$contents,!0);return n(t)},$eval:function(t){var n=this.$bindContext(this.$contents,!1);return n(t)},$layout:function(t,n,e,r){1==arguments.length&&(n=t,t=function(){return this.$result()}.bind(this)),q.push(function(){var o=this.$view.$layout(t,n,e,this,!0);return i.obsList.push(o),r!==!1?o.publish(!0):null}.bind(this))},$layoutValue:function(t){return this.$hasProps()||this.$value(n),this.$layout(function(){return this.$value()}.bind(this),t)}}).$extend(e);return r.bgOnDispose(function(){t.each(i.obsList,function(t){t.bgIsDispose||t.unObserve()})}),r.bgDispose(i),r},m=function(n){var e={obsList:[],obsListUn:[],ctrls:[],inits:[],readys:[],readyAlls:[]},i=g({$controller:function(t){e.ctrls.push(t)},$init:function(t){e.inits.push(t)},$ready:function(t){e.readys.push(t)},$readyAll:function(t){e.readyAlls.push(t)},$observe:function(n,i,r,o){var u=function(){return this.$updateAsync(),i.apply(this,arguments)}.bind(this);u.orgFn=i.orgFn;var c=t.isFunction(n)?t.observe(n,u):t.observe(this,n,u);return o&&c.isObs||(c.isObs?e.obsList:e.obsListUn).push([c,r,o]),c},$layout:function(n,e,i,r,o){return this.$observe(n,t.aFrameProxy(e,i),r,o)},$layoutAfter:function(t,n,e,i){return this.$layout(t,n,1,e,i)},$update:function(t){this.$isReady&&(this.bgToObserve(!0),e.obsListUn=e.obsListUn.filter(function(n,i){var r=n[1],o=n[0];n[2];return r&&r.bgIsDispose?(o.unObserve(),!1):!o.bgIsDispose&&(o.isSucc?o.isObs||(t?o.refresh():o.check()):o.refresh(),o.isObs)?(n[2]||e.obsList.push(n),!1):!0},this))},$updateAsync:function(){this._upastime_&&clearTimeout(this._upastime_),this._upastime_=setTimeout(function(){this.$update()}.bind(this),1)}}).$extend(n);return i.bgOnDispose(function(){t.each(e.obsList,function(t){t[0].bgIsDispose||t[0].unObserve()}),t.each(e.obsList,function(t){t[0].bgIsDispose||t[0].unObserve()}),C(this)}),i.bgDispose(e),M.push(function(){if(!this.bgIsDispose){var n=e.ctrls;n&&(e.ctrls=[],t.each(n,function(t){t&&t.call(this,this)},this)),this.bgToObserve()}}.bind(i)),W.push(function(){if(!this.bgIsDispose){var n=e.inits,i=[];return n&&(e.inits=[],t.each(n,function(t){s(i,t&&t.call(this,this))},this)),this.bgToObserve(),i}}.bind(i)),G.push(function(){if(!this.bgIsDispose){var n=e.readys,i=[];return n&&(e.readys=[],t.each(n,function(t){s(i,t&&t.call(this,this))},this)),this.bgToObserve(),i}}.bind(i)),X.push(function(){if(!this.bgIsDispose){var n=e.readyAlls,i=[];return n&&(e.readyAlls=[],t.each(n,function(t){s(i,t&&t.call(this,this))},this)),this.bgToObserve(),i}}.bind(i)),k(i),i},$=function(n){var e={removeNodes:function(n){n&&(d("_cpLinkC",n),t.each(n,function(t){rt(t)}))},clear:function(n){t.each(n.$children,function(t){t.bgDispose()}),t.each(n.$virtualNodes,function(t){t.bgDispose()}),n.$childView&&n.$childView.bgDispose(),n.$children=n.$childView=null,n.$virtualNodes=[]},getContent:function(t){return t._tmplFn?t._tmplFn():t.$contents},getPNode:function(n){var e=n.$nodes,i=t.inArray(function(t){return!!t.parentNode},e);return i>-1?e[i]:null}},i=b({$childView:null,$app:null,$cmd:"",$attrs:null,$nodes:null,$virtualNodes:[],$setNodes:function(t){e.removeNodes(this.$nodes),this.$nodes=t,p("_cpLinkC",t,function(){this.bgDispose()}.bind(this))},$getAttr:function(t){return this.$attrs.$getAttr(t)},$setAttr:function(t,n){this.$attrs.$setAttr(t,n)},$parent:null,$children:null,$removeChild:function(n){this.$children=t.removeArrayItem(n,this.$children)},$getChild:function(n){var e;return t.each(this.$children,function(){return this.$id==n?(e=this,!1):void 0}),e},$export:null,$html:function(n){if(arguments.length>0)return e.clear(this),this.$tmpl(n),yt({cp:this,context:e.getPNode(this)});var i=[];return t.each(this.$nodes,function(t){i.push(1==t.nodeType?t.outerHTML:t.textContent)}),i.join("")},$text:function(n){if(arguments.length>0)return e.clear(this),this.$contents=this.tmplTag=t.htmlEncode(n),mt(e.getPNode(this),this,"insertBefore");var i=[];return t.each(this.$nodes,function(t){i.push(t.textContent)}),i.join("")},$tmpl:function(n){return this._tmplFn=t.isFunction(n)?n:function(){return n},this},_render:function(){var t=e.getContent(this);return c(t)?t.then(function(t){L(t,this)}.bind(this)):L(t,this),s(V,t),this},$render:function(){return this._render(),R()},$controller:function(t){this._ctrl=t}}).$extend(n);return i.bgOnDispose(function(){var n=this.$parent;n&&!n.bgIsDispose&&n.$removeChild(this),t.each(this.$elseList,function(t){t.bgIsDispose||t.bgDispose()}),this.$attrs.bgDispose(),n&&n.bgIsDispose||e.removeNodes(this.$nodes),e.clear(this)}),i.bgDispose(e),H.push(function(){if(!this.bgIsDispose){var t=this._ctrl,n=this.$childView||this.$view;t&&(this._ctrl=null,t.call(this,n)),"view"!=this.$cmd&&this.$name&&(this.$view[this.$name]=this.$export?this.$export:n)}}.bind(i)),i},y=function(t){return b({$contents:t})},w=function(n){var e=[],i=b({$contents:n,$getAttr:function(t){return this[t]?this[t].$contents:""},$setAttr:function(t,n){this[t]?this[t].$contents=n:(e.push(t),this[t]=y(n))},_setCP:function(n){this.$view=n.$view,this.$cp=n;var i;t.each(e,function(t){i=this[t],i.$cp=n,i.$app=n.$app,i.$view=n.$view},this)}});return i.bgOnDispose(function(){t.each(e,function(t){this[t].bgDispose()},this)}),i},x=function(n,e){var i=n.$childView||n.$view,r=g({$view:i,$app:i.app,$cp:n,$node:e,$attrs:g({}),_addAttr:function(t,n){return this.$attrs[t]=_(this,t,n)}});return It(r,e),n.$virtualNodes.push(r),r.bgOnDispose(function(){var n=this.$attrs;t.eachProp(n,function(t){t.bgDispose()})}),r},_=function(n,e,i){var r=b({$cp:n.$cp,$vNode:n,$node:n.$node,$app:n.$app,$view:n.$view,$name:e,$contents:i,$attr:function(t){return 0==arguments.length?this.$attrEx(this.$name):void this.$attrEx(this.$name,t)},$prop:function(t){return 0==arguments.length?this.$propEx(this.$name):void this.$propEx(this.$name,t)},$attrEx:function(t,n){var e=this.$node,i=arguments.length;switch(t){case"class":if(1==i)return e.className;e.className=n;break;case"value":var r="select"==e.tagName.toLowerCase();if(1==i)return(r?Bt:Mt)(e);(r?Bt:Mt)(e,n);break;default:if(1==i)return Vt(e,t);Vt(e,t,n)}},$propEx:function(t,n){return 1==arguments.length?Rt(this.$node,t):void Rt(this.$node,t,n)},$css:function(t,n){return 1==arguments.length?Gt(this.$node,t):void Gt(this.$node,t,n)},$show:function(){Xt(this.$node)},$hide:function(){Qt(this.$node)},$on:function(n,e,i){o.push(t.sliceArray(arguments)),Ht.apply(this.$node,arguments)},$one:function(n,e,i){var r=t.sliceArray(arguments),u=this.$node;r[2]=function(){e&&e.apply(this,arguments),Ut.apply(u,arguments)},o.push(r),Ht.apply(u,r)},$off:function(t,n,e){Ut.apply(this.$node,arguments)}}),o=[];r.bgOnDispose(function(){t.each(o,function(t){Ut.apply(this.$node,t)}.bind(this))});var u=nn(e);return u(r),r};t.controller("view_test1",function(t){t.user={desc:'asdfasdfasfdasdf11<br />asdfasdf<div>sdf</div> {{html "<div>div</div><div>div1</div>asdf" /}}sdfs{{html name /}}sdf',enabled:!0,role:"test"},window.view1=t});var A={},N=function(t,n){return 1==arguments.length?A[t]:void(A[t]=n)};N("view",function(n){var e=n.$getAttr("controller");return e&&(e=t.controller(e),e&&n.$view.$controller(e.fn)),n}),N("splice",function(t){return t.$tmpl('<div class="splice">{{view /}} {{text title /}}==============================</div>'),t.$controller(function(n){n.title=t.$name}),t}),N("controller",function(t){return t.$tmpl(""),t.$view.$controller(function(){t.$eval()}),t}),N("for",function(t){var n=(t.$getAttr("src"),"datas");return t.$contents=n,t.$tmpl(""),t.$layout(function(){return t.$result()},function(n){return t.$html(n.value)}),t}),N("if",function(n){n.$tmpl("");var e=n.$contents,i=n.$elseList,r=function(r,o){if(-1==r&&o)return e;var u=n.$attrs.$result();if(u)return e;var c;return t.each(i,function(t,n){return!t.$attrs.$contents||r==n&&o||t.$attrs.$result()?(c=t.$contents,!1):void 0}),c};return n.$layout(function(){return n.$attrs.$result()},function(t){return n.$html(r(-1,t.value))}),t.each(i,function(t,e){t.$attrs.$contents&&n.$layout(function(){return t.$attrs.$result()},function(t){return n.$html(r(e,t.value))},0,!1)}),n}),N("include",function(n){return n.$tmpl(function(){return t.tmpl(n.$getAttr("src"))}),n}),N("html",function(t){return t.$layout(function(){return t.$attrs.$result()},function(n){return t.$html(n.value)}),t}),N("text",function(t){return t.$layout(function(){return t.$attrs.$result()},function(n){return t.$text(n.value)}),t}),N("select",function(t){return t.$tmpl('{{view /}}<select>{{for item in datas}}<option value="1"></option>{{/for}}</select>'),t.$controller(function(t){t.idName="",t.textName="",t.id="",t.datas=""}),t});var O=/\{\{\s*(\/?if|else)\s*(.*?)\}\}/gi,j=/(\S+)\s*=\s*(?:\"((?:\\\"|[^"])*?)\"|\'((?:\\\'|[^'])*?)\')/gi,D=function(t){return["<",'script type="text/html" bg-id="',t,'"></',"script>"].join("")},T=[],k=function(t){T.push(t)},C=function(n){T=t.removeArrayItem(n,T)},P=function(n){var e=t.inArray(function(t){return t.$name==n},T);return e>-1?T[e]:null},E=/\{\{\s*(\/?)\s*([^\s{}]+)\s*((?:(?:.|\n|\r)(?!\{\{|\}\}))*)(.?)\}\}/gi,S=function(n){var e,i,r,o,u,c,s,a,l,f=[],h=[],p=0,d=0,v=0;for(E.lastIndex=0;e=E.exec(n);)c=e[0],a=e.index,o=e[2],i="/"==e[4]||"else"==o||"case"==o,r=i||"/"==e[1],u=e[3],!i&&(u+=e[4]),0==v&&(!i&&r||(s=n.substr(p,a-p),h.push(s),l=t.makeAutoId(),h.push(D(l)),f.push({id:l,index:a,single:i,end:r,tag:o,attrs:u,contents:""})),d=a+c.length),r?(i||v--,0==v&&(f[f.length-1].contents=n.substr(d,a-d))):v++,p=a+c.length;return h.push(n.substr(p,n.length-p)),{contents:h.join(""),regs:f}},L=function(n,e){var i,r,o=[];t.isString(n)||(n=t.toStr(n));var u=S(n);n=u.contents,t.each(u.regs,function(n){var e,r,u,c=n.tag,s=n.contents;if(s&&(s=t.trim(s)),"if"==c){var a=F(s);s=a.contents,e=a.elseList,r=a.whereList}u={$id:n.id,$cmd:c,$attrs:I(n.attrs),$contents:s,$elseList:e,$whereList:r},"view"==u.$cmd&&(i=u),o.push(u)}),i?(r=t.app(i.$attrs.$getAttr("app")),i=m({$name:t.trim(i.$attrs.$getAttr("name")),$app:r}),e.$childView=i):(r=e.$app,i=e.$view);var c,s,a,l=[];t.each(o,function(n){if(c=$(n),c.$view=i,c.$attrs._setCP(c),c.$app=r,c.$parent=e,c.$name=t.trim(c.$attrs.$getAttr("name")),s=N(n.$cmd),a=c.$elseList){var o,u=c.$whereList;t.each(a,function(t,n){o=$({$app:r,$attrs:I(u[n]),$view:i,$contents:t}),o.$attrs._setCP(o),a[n]=o}),c.$whereList=null}s&&s(c),c._render(),l.push(c)}),e.$children=l,e.tmplTag=n},F=function(n){var e,i,r=0,o=-1,u=-1;O.lastIndex=0;for(var c,s=[],a=[];e=O.exec(n);)switch(i=e[1],c=t.trim(e[2]),i){case"if":r++;break;case"else":0>=r&&(a.push(c),-1==u&&(u=e.index),o>=0&&s.push(n.substr(o,e.index-o)),o=e.index+e[0].length);break;case"/if":r--}return 0>=r&&s.push(n.substr(o)),{contents:u>-1?n.substr(0,u):n,elseList:s,whereList:a}},I=function(t){j.lastIndex=0;for(var n,e=w(t);n=j.exec(t);)e.$setAttr(n[1],n[2]||n[3]);return e},V=[],R=function(){var t=V;return V=[],u.always(t).then(function(){return V.length>0?_renderStep():void 0})},H=[],U=function(){var n=H;n.length>0&&(H=[],t.each(n,function(t){t(),U()}))},M=[],B=function(){var n=M;n.length>0&&(M=[],t.each(n,function(t){t(),B()}))},q=[],z=function(){var n=q,e=[];return n.length>0&&(q=[],t.each(n,function(t){s(e,t())})),e},W=[],Z=function(){var n=W,e=[];return n.length>0&&(W=[],t.each(n,function(t){a(e,t())})),e},G=[],J=function(){var n=G,e=[];return n.length>0&&(G=[],t.each(n,function(t){a(e,t())})),e},X=[],Q=function(){var n=X,e=[];return n.length>0&&(X=[],t.each(n,function(t){a(e,t())})),e},K=":scope ";try{nt.querySelector(":scope body")}catch(Y){K=""}var tt=document,nt=tt.documentElement,et=function(t,n){return n||(n=nt),n.querySelectorAll(K+t)},it=function(t,n){return n||(n=nt),n.querySelector(K+t)},rt=function(t){t.parentNode&&t.parentNode.removeChild(t)},ot={select:[1,"<select multiple='multiple'>","</select>"],fieldset:[1,"<fieldset>","</fieldset>"],table:[1,"<table>","</table>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"],colgroup:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],map:[1,"<map>","</map>"],div:[1,"<div>","</div>"]},ut=/\/(java|ecma)script/i,ct=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,st=function(n){if(n.src)t.using(n.src);else{var e=(n.text||n.textContent||n.innerHTML||"").replace(ct,"");e&&(window.execScript||function(t){window.eval.call(window,t)})(e)}},at=function(n,e){t.each(n.querySelectorAll("script"),function(t){t.type&&!ut.test(t.type)||(rt(t),e&&st(t))})},lt=function(n,e,i){var r=e?t.isString(e)?e:e.tagName.toLowerCase():"",o=ot[r]||ot.div,u=o[0];n=o[1]+n+o[2];var c=tt.createElement("div");for(c.innerHTML=n;u--;)c=c.lastChild;return at(c,i),t.sliceArray(c.childNodes)},ft=function(n,e,i){var r;n.length>1?(r=document.createDocumentFragment(),t.each(n,function(t){r.appendChild(t)})):r=n[0],"appendTo"==i?e.appendChild(r):e.parentNode[i](r,e)},ht=lt("<option>test</option><!--test-->","select").length>1,pt="bgcpid_",dt=function(t){var n=ht?["<!--",pt,t.$id,"-->"].join(""):D(t.$id);return lt(n)[0]},vt=/script/i,gt=function(t){return vt.test(t.tagName)?t.getAttribute("bg-id"):null},bt=function(n,e){var i=0==n.length;i||(i=t.inArray(function(t){return 1==t.nodeType},n)<0),i&&n.push(dt(e))},mt=function(n,e,i){var r=Lt(e.tmplTag),o=lt(r,"appendTo"==i?n:n.parentNode,!0);if(o.length>0){var u=o[0].parentNode;Ft(e,o),$t(o,e),o=t.sliceArray(u.childNodes)}bt(o,e),ft(o,n,i),e.$setNodes(o)},$t=function(n,e){var i,r;t.each(n,function(t){1==t.nodeType&&(i=gt(t),i?(r=e.$getChild(i),r&&(mt(t,r,"insertBefore"),rt(t))):$t(et("script",t),e))})},yt=function(n){var e=n.view,i=n.cp||$({$app:e?e.$app:null,$view:e,$contents:n.tmpl});return i.$render().then(function(){U(),B();var e,r;return n.cp?(e=n.context,r="insertBefore"):(e=t.isString(n.context)?it(n.context):n.context,r="appendTo"),mt(e,i,r),wt()})},wt=function(){var n=t.Deferred(),e=!1;l(z(),function(t){e||(e=!!t),l(Z(),function(t){e||(e=!!t),l(J(),function(t){e||(e=!!t),l(Q(),function(t){e||(e=!!t),n.resolve()})})})});var i=n.promise();return e&&i.then(function(){return wt()}),i},xt=document.createElement("div"),_t=/^.*encode=['"](.*)['"].*$/i,At=function(t){return xt.setAttribute("encode",t),xt.outerHTML.replace(_t,"$1")};t.attrEncode=At,t.attrDecode=t.htmlDecode;var Nt=/\<.*?\[\[.*?\]\][^>]*\>/gi,Ot=/\s*(\S+)\s*=\s*((\")(?:\\\"|[^"])*?\[\[.+?\]\](?:\\\"|[^"])*\"|(\')(?:\\\'|[^'])*?\[\[.+?\]\](?:\\\'|[^'])*\')/gi,jt=/\s*(\/?\>)$/,Dt=/^\s*['"](.*?)['"]\s*$/,Tt=/^\s*\[\[(.*?)\]\]\s*$/,kt=/\[\[(.*?)\]\]/g,Ct="bg-virtual",Pt=[" ",Ct,'="'].join(""),Et='" $1',St="["+Ct+"]",Lt=function(t){return t=t.replace(Nt,function(t,n,e){Ot.lastIndex=0;var i={},r=!1,o=!1,u=t.replace(Ot,function(t,n,e,u,c){return o||"bg-virtual"==n?(r=!1,void(o=!0)):(u=u||c,e=e.replace(Dt,"$1").replace(Tt,"$1"),kt.lastIndex=0,kt.test(e)&&(e=u+e.replace(kt,u+" + ($1) + "+u)+u),i[n]=e,r=!0,"")});return r&&(u=u.replace(jt,[Pt,At(JSON.stringify(i)),Et].join(""))),o?t:u})},Ft=function(n,e){var i;t.each(e,function(e){1==e.nodeType&&(e.hasAttribute(Ct)&&x(n,e),e.hasChildNodes&&(i=et(St,e),i.length>0&&t.each(i,function(t){x(n,t)})))})},It=function(n,e){var i=e.getAttribute(Ct),r=JSON.parse(i);t.eachProp(r,function(t,e){n._addAttr(e,t)})},Vt=function(t,n,e){return arguments.length<3?t.getAttribute(n):void t.setAttribute(n,e)},Rt=function(t,n,e){return arguments.length<3?t[n]:void(t[n]=e)},Ht=document.addEventListener,Ut=document.removeEventListener,Mt=function(t,n){return arguments.length<2?t.value:void(t.value=n)},Bt=function(n,e){var i="select-one"==n.type;if(i){if(arguments.length<2)return n.value;n.value=e}else{var r=n.options,o=[];if(arguments.length<2)return t.each(r,function(t){t.selected&&!t.disabled&&o.push(t.value)}),o;t.isArray(e)||(e=[e]),t.each(r,function(t){t.selected=e.indexOf(t.value)>=0})}},qt=document.defaultView.getComputedStyle,zt={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},Wt=function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},Zt=function(n,e){return t.isNumeric(e)&&!zt[Wt(n)]?e+"px":e},Gt=function(t,e,i){var r=arguments.length;if(3>r)return 1==r?n:t.style[Wt(e)]||qt(t,"").getPropertyValue(Wt(e));var o=null;e=Wt(e),""==i?t.style.removeProperty(e):o=e+":"+Zt(e,i),o&&(t.style.cssText+=";"+o)},Jt=function(t){var n="_bgshow_";return n in t?t[n]:t[n]=Gt(t,"display")},Xt=function(t){var n=Jt(t);Gt(t,"display","none"==n?"block":n)},Qt=function(t){Jt(t),Gt(t,"display","none")},Kt="bg_default_vattr",Yt={},tn=/^\s*on/i,nn=function(t,n){return 1==arguments.length?Yt[t]||Yt[Kt]:void(Yt[t]=n)};nn(Kt,function(n){var e=n.$name,i=n.$view;if(tn.test(e)){var r=e.replace(tn,""),o=function(t,e){var r=function(){return i.$updateAsync(),e.apply(this,arguments)};n.$on(t,r)},u=/^\s*\[(.|\n)*\]\s*$/g.test(n.$contents)?n.$result():n.$value();return t.isFunction(u)||t.isArray(u)||(u=function(t){return n.$eval(t)}),void o(r,u)}return n.$layout(function(t){n.$attr(t.value)}),n}),t.each("checked,unchecked,disabled,enabled,readonly".split(","),function(t){nn(t,function(n){var e=function(e){switch(t){case"enabled":n.$propEx("disabled",!e);break;case"unchecked":n.$propEx("checked",!e);break;default:n.$prop(e)}};if(n.$layout(function(t){e(t.value)}),"checked"==t||"unchecked"==t){var i=function(){var e=n.$propEx("checked");n.$value("checked"==t?e:!e)};n.$on("click",i)}return n})}),t.each("show,hide,visible".split(","),function(t){nn(t,function(n){var e=function(e){switch(t){case"hide":e=!e;case"show":e?n.$show():n.$hide();break;case"visible":e=e?"visible":"hidden",n.$css("visibility",e)}};return $attr.$layout(function(t){e(t.value)}),n})}),t.each("model,value".split(","),function(n){nn(n,function(e){var i,r,o=e.$node,u="value"==n,c=Vt(o,"type"),s="radio"==c&&!u,a="checkbox"==c&&!u,l=a?h(o):null,f="select"==o.tagName.toLowerCase(),h=function(t){return 0==arguments.length?e.$attrEx("value"):void e.$attrEx("value",t)},p=function(){return a?e.$propEx("checked")?l:"":h()},d=function(n){n=f&&t.isArray(n)?n:t.toStr(n),a?e.$propEx("checked",h()==n):s?e.$propEx("checked",h()==n):h(f?n:n)},v=function(){var t=p();(i!=t||s)&&(i=t,e.$value(t))};return r=s?"click":"change",r&&e.$on(r,v),e.$layoutValue(function(t){var n=t.value;d(n)}),e})}),t.view=function(t){return 0==arguments.length?T:P(t)},t.rootView=function(){return rn};var en=tt.getElementById("tmpl1").innerHTML,rn=m({$name:"",$app:t.app("")});console.time("boot"),yt({tmpl:en,view:rn,context:"#context1"}).then(function(){console.timeEnd("boot")}),t.compile=function(t){return(new _cmpClass).view(t)},t.bgEventDef("ready"),function(){return}()}(bingo),function(t){"use strict";t.service("$rootView",function(){return t.rootView()}),t.service("$parentView",["$view",function(t){return t.$parentView()}]),t.service("$inject",["$view","$attr",function(n,e){return function(i,r){return t.inject(i,n,{node:e&&e.node,$viewnode:e&&e.viewnode,$attr:e,$withData:e?t.extend({},e.withData,r):r},e)}}]),t.service("$compile",["$view",function(n){return function(e){return t.compile(n).tmpl(e)}}]),t.service("$ajax",["$view",function(n){return function(e){return t.ajax(e,n)}}]),t.each(["$comp","$component"],function(n){t.service(n,["$view",function(t){var n=function(n){return t.$getComp(n)};return n.create=function(n){return t.$createComp(n)},n}])}),t.each(["$bindContext","$evalContext"],function(n){var e="$bindContext"==n;t.service(n,["$view","$viewnode","$withData",function(n,i,r){return function(o,u,c,s){return u||(u=i.node),c=t.extend({},r,c),t.bindContext(i,o,n,u,c,s,e)}}])}),t.service("$observe",["$view",function(t){return function(n,e,i){return t.$observe(n,e,i)}}]),t.service("$layout",["$view",function(t){return function(n,e,i){return t.$layout(n,e,1,i)}}]),t.service("$tmpl",["$view",function(n){return function(n,e){return t.tmpl(n,e)}}]);t.service("$cache",function(){return function(n,e,i){var r=[_cacheM].concat(t.sliceArray(arguments));return t.cache.apply(t,r)}});var n={};t.service("$param",function(){return function(e,i){return 1==arguments.length?t.cache(n,e):t.cache(n,e,i,10)}})}(bingo),function(t){"use strict";var n=(t.Promise,function(t,n,e){return arguments.length<3?t.getAttribute(n):void t.setAttribute(n,e)}),e=function(t,n,e){return arguments.length<3?t[n]:void(t[n]=e)},i=document.addEventListener,r=document.removeEventListener,o=function(t,n){return arguments.length<2?t.value:void(t.value=n)},u=function(n,e){var i="select-one"==n.type;if(i){if(arguments.length<2)return n.value;n.value=e}else{var r=n.options,o=[];if(arguments.length<2)return t.each(r,function(t){t.selected&&!t.disabled&&o.push(t.value)}),o;t.isArray(e)||(e=[e]),t.each(r,function(t){t.selected=e.indexOf(t.value)>=0})}},c=document.defaultView.getComputedStyle,s={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},a=function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},l=function(n,e){return t.isNumeric(e)&&!s[a(n)]?e+"px":e},f=function(t,n,e){var i=arguments.length;if(3>i)return 1==i?void 0:t.style[a(n)]||c(t,"").getPropertyValue(a(n));var r=null;n=a(n),""==e?t.style.removeProperty(n):r=n+":"+l(n,e),r&&(t.style.cssText+=";"+r)},h=function(t){var n="_bgshow_";return n in t?t[n]:t[n]=f(t,"display")},p=function(t){var n=h(t);f(t,"display","none"==n?"block":n)},d=function(t){h(t),f(t,"display","none")},v=/\s+/g,g=function(t){var n=t.className;return n?n.split(v):[]},b=function(t,n){var e=n.join(" ");e==t.className||(t.className=e)},m=function(t,n){return n?t.indexOf(n)>=0:!1},$=function(t,n){m(t,n)||t.push(n)},y=function(t,n){return m(t,n)?t.filter(function(t){return t!=n}):t};t.each(["bg-controller","bg-controller-add"],function(e){var i="bg-controller-add"==e;t.command(e,function(){return{priority:i?5:1,tmpl:"",replace:!1,include:!1,view:!i,compileChild:i,compilePre:null,compile:null,link:null,controller:["$view","$compile","node","$attr",function(e,r,o,u){var c=u.content,s=null,a=n(o,"bg-name"),l=e.$parentView();t.isNullEmpty(c)||(l.bgTestProps(c)?s=l.bgDataValue(c):window.bgTestProps(c)&&(s=window.bgDataValue(c)));var f=function(){return!i&&t.usingAll().then(function(){return e.bgIsDispose||r().nodes(o.childNodes).compile()})};if(t.isNullEmpty(c)||t.isFunction(s)||t.isArray(s))return s&&e.$addController(s,a,c),f();var h=c,p=t.routeContext(h),d=p.context();return d.controller?(e.$setApp(d.app),e.$addController(d.controller,a,c),f()):t.using(h).then(function(){if(!e.bgIsDispose){var t=p.context();return t.controller?(e.$setApp(t.app),e.$addController(t.controller,a,c),f()):void 0}})}]}})}),t.each(["bg-init","bg-load"],function(n){var e="bg-load"==n?999999:3;t.command(n,function(){var t={priority:e};return t["bg-load"==n?"link":"compile"]=["$attr",function(t){t.$eval()}],t})}),t.command("bg-not-compile",function(){return{compileChild:!1}}),t.command("bg-node",function(){return{compile:["$attr",function(t){t.$value(t.node)}]}}),t.command("bg-text",function(){return{compile:["$attr","node",function(t,n){t.$layout(function(t){n.textContent=t.value})}]}}),t.command("bg-html",function(){return{compile:["$attr","$viewnode",function(t,n){t.$layout(function(t){return n.$html(t.value)})}]}}),t.command("bg-include",function(){return{compile:["$attr","$viewnode","$tmpl",function(t,n,e){var i=function(i){return e(i).then(function(e){return t.bgIsDispose||n.$html(e)})};return t.$hasProps()?void t.$layoutValue(function(t){return n.$html(t.value)}):i(t.content)}]}}),t.command("bg-if",function(){return{compileChild:!1,compile:["$attr","$viewnode","node","$tmpl",function(t,n,e,i){return i(e).then(function(i){var r=function(t){return t?n.$html(i).then(function(){p(e)}):void d(e)};t.$layout(function(t){return r(t.value)})})}]}}),t.each("attr,prop,src,checked,unchecked,disabled,enabled,readonly,class".split(","),function(o){t.command("bg-"+o,function(){return{compile:["$view","$attr","node",function(u,c,s){var a=function(i){switch(o){case"attr":t.eachProp(i,function(t,e){n(s,e,t)});break;case"prop":t.eachProp(i,function(t,n){e(s,n,t)});break;case"enabled":e(s,"disabled",!i);break;case"unchecked":e(s,"checked",!i);break;case"disabled":case"readonly":case"checked":e(s,o,i);break;case"class":var r=g(s);t.isObject(i)?t.eachProp(i,function(n,e){t.isString(n)?$(r,n):n?$(r,e):r=y(r,e)}):i&&$(r,i),b(s,r);break;default:n(s,o,i)}};if(c.$layout(function(t){a(t.value)}),"checked"==o||"unchecked"==o){var l=function(){var t=e(s,"checked");c.$value("checked"==o?t:!t)};i.call(s,"click",l),c.bgOnDispose(function(){r.call(s,"click",l)})}}]}})}),t.each("event,click,blur,change,dblclick,focus,focusin,focusout,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,resize,scroll,select,submit,contextmenu".split(","),function(n){t.command("bg-"+n,function(){return["$view","node","$attr",function(e,o,u){var c=[],s=function(t,n){var r=function(){return e.$updateAsync(),n.apply(this,arguments)};c.push([t,r]),i.call(o,t,r)};if(u.bgOnDispose(function(){t.each(c,function(t){r.call(o,t[0],t[1])})}),"event"!=n){var a=/^\s*\[(.|\n)*\]\s*$/g.test(u.content)?u.$results():u.$value();t.isFunction(a)||t.isArray(a)||(a=function(t){return u.$eval(t)}),s(n,a)}else{var l=u.$results();t.isObject(l)&&t.eachProp(l,function(t,n){s(n,t)})}}]})}),t.each("style,show,hide,visible".split(","),function(n){t.command("bg-"+n,function(){return{compile:["$attr","node",function(e,i){var r=function(e){switch(n){case"style":t.eachProp(e,function(t,n){f(i,n,t)});break;case"hide":e=!e;case"show":e?p(i):d(i);break;case"visible":e=e?"visible":"hidden",f(i,"visibility",e);break;default:f(i,n,e)}};e.$layout(function(t){r(t.value)})}]}})}),t.command("bg-model",function(){return{compile:["$view","node","$attr",function(c,s,a){var l,f,h=n(s,"type"),p="radio"==h,d="checkbox"==h,v=d?o(s):null,g="select"==s.tagName.toLowerCase(),b=function(){return d?e(s,"checked")?v:"":g?u(s):o(s)},m=function(n){n=g&&t.isArray(n)?n:t.toStr(n),d?e(s,"checked",o(s)==n):p?e(s,"checked",o(s)==n):g?u(s,n):o(s,n)},$=function(){var t=b();(l!=t||p)&&(l=t,a.$value(t))};p?f="click":(f="change",i.call(s,"change",$)),f&&(i.call(s,f,$),a.bgOnDispose(function(){r.call(s,f,$)})),a.$layoutValue(function(t){var n=t.value;m(n)})}]}}),t.command("bg-for",function(){return{priority:10,compileChild:!1,compile:["$view","$compile","node","$attr","$tmpl",function(n,e,i,r,o){var u=x(r);if(u){var c=u.itemName,s=u.tmpl;s||o(i).then(function(t){s=t});var a=function(t,o){return n.bgIsDispose||e().render(t,o,c,r.withData).htmlTo(i).compile().then(function(){if(!n.bgIsDispose){var t=r.viewnode.$getAttr("bg-model");t&&t.$publish()}})};r.$layout(function(n){var e=n.value,i=t.isArray(e),r=i?e:t.sliceArray(e);return!i&&0==r.length&&(r=e?[e]:[]),o(s).then(function(t){return a(t,r)})})}}]}});var w=/[ ]*([^ ]+)[ ]+in[ ]+(?:(.+)[ ]+tmpl[ ]*=[ ]*(.+)|(.+))/,x=function(n){var e=n.content;t.isNullEmpty(e)&&(e="item in {}"),w.test(e)||(e=["item in ",e].join(""));var i="",r="",o="";return e.replace(w,function(){i=arguments[1],r=arguments[2],o=t.trim(arguments[3]),t.isNullEmpty(r)&&(r=arguments[4])}),n.content=r,{itemName:i,dataName:r,tmpl:o}};t.each(["bg-component","bg:component"],function(e){var i="bg-component"==e;t.command(e,function(){return{priority:3,view:!0,compileChild:!1,replace:!0,include:!1,compilePre:["$view","node","$inject",function(e,r,o){var u,c=n(r,i?"bg-component":"bg-src"),s=n(r,"bg-name")||t.makeAutoId();t.isNullEmpty(c)||(e.bgTestProps(c)?u=e.bgDataValue(c):window.bgTestProps(c)&&(u=window.bgDataValue(c)));var a=function(n){n=t.isFunction(n)?o(n):n,e.$compileComp(n,r,s),this.tmpl=n.$tmpl||r,this._bgcompdef_={def:n,name:s}}.bind(this);if(u)return a(u);var l=c,f=t.routeContext(l),h=f.context();return h.component?a(h.component):t.using(l).then(function(){return e.bgIsDispose?void 0:(f=t.routeContext(l),h=f.context(),h.component?a(h.component):void 0)})}],controller:["$view","$compile","node","$attr",function(t,n,e){var i=t.$parentView(),r=this._bgcompdef_,o=r.def,u=r.name;if(t.bgOnDispose(function(){i.$removeComp(u)}),o){var c=t.$initComp(o,u);return c.bgToObserve(),n().nodes([e]).compile()}}]}})})}(bingo);